{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React, { useEffect, useState } from \"react\";\nimport useOrdersStyles from \"./useOrdersStyles\";\nimport OrdersMessages from \"./Orders.message\";\nimport { useIntl } from \"react-intl\";\nimport { api } from \"domains/api\";\nimport axios from \"axios\";\nimport Table from \"components/Table\";\nimport GolModal from \"components/GolModal/GolModal\";\nimport GolButton from \"components/GolButton/GolButton\";\nimport ChangeStatus from \"./components/ChangeStatus\";\nimport { socket } from \"utils/socket\";\n\nconst Header = () => /*#__PURE__*/_jsxs(\"tr\", {\n  children: [/*#__PURE__*/_jsx(\"th\", {\n    children: \"\\u0646\\u0627\\u0645 \\u0645\\u0634\\u062A\\u0631\\u06CC\"\n  }), /*#__PURE__*/_jsx(\"th\", {\n    children: \"\\u0634\\u0645\\u0627\\u0631\\u0647 \\u0645\\u0634\\u062A\\u0631\\u06CC\"\n  }), /*#__PURE__*/_jsx(\"th\", {\n    children: \"\\u062A\\u0639\\u062F\\u0627\\u062F \\u0627\\u0642\\u0644\\u0627\\u0645\"\n  }), /*#__PURE__*/_jsx(\"th\", {\n    children: \"\\u0648\\u0636\\u0639\\u06CC\\u062A \\u0633\\u0641\\u0627\\u0631\\u0634\"\n  })]\n});\n\nconst Row = ({\n  data,\n  setOrder,\n  setShowDetails\n}) => /*#__PURE__*/_jsx(_Fragment, {\n  children: data === null || data === void 0 ? void 0 : data.map(el => {\n    var _el$customer, _el$customer2, _el$items;\n\n    return /*#__PURE__*/_jsxs(\"tr\", {\n      onClick: () => {\n        setShowDetails(true);\n        setOrder(el);\n      },\n      children: [/*#__PURE__*/_jsx(\"td\", {\n        children: el === null || el === void 0 ? void 0 : (_el$customer = el.customer) === null || _el$customer === void 0 ? void 0 : _el$customer.email\n      }), /*#__PURE__*/_jsx(\"td\", {\n        children: el === null || el === void 0 ? void 0 : (_el$customer2 = el.customer) === null || _el$customer2 === void 0 ? void 0 : _el$customer2.phoneNumber\n      }), /*#__PURE__*/_jsx(\"td\", {\n        children: el === null || el === void 0 ? void 0 : (_el$items = el.items) === null || _el$items === void 0 ? void 0 : _el$items.length\n      }), /*#__PURE__*/_jsx(\"td\", {\n        children: el === null || el === void 0 ? void 0 : el.status\n      })]\n    }, el === null || el === void 0 ? void 0 : el._id);\n  })\n});\n\nconst Orders = () => {\n  var _order$customer, _order$customer2, _order$customer3, _order$customer4, _order$customer5, _order$items;\n\n  const {\n    formatMessage\n  } = useIntl();\n  const {\n    0: orders,\n    1: setOrders\n  } = useState([]);\n  const {\n    0: order,\n    1: setOrder\n  } = useState(null);\n  const {\n    0: showDetails,\n    1: setShowDetails\n  } = useState(false);\n  const {\n    0: changeStatus,\n    1: setChangeStatus\n  } = useState(false);\n  const classes = useOrdersStyles({\n    changeStatus\n  });\n  console.log(socket);\n  useEffect(() => {\n    axios.get(`${api}/api/order`, {\n      headers: {\n        \"x-auth-token\": localStorage.token\n      }\n    }).then(res => {\n      setOrders(res === null || res === void 0 ? void 0 : res.data);\n    }).catch(err => console.log(err));\n  }, []);\n  return /*#__PURE__*/_jsxs(\"div\", {\n    children: [/*#__PURE__*/_jsx(\"h1\", {\n      children: formatMessage(OrdersMessages.orders)\n    }), /*#__PURE__*/_jsx(\"br\", {}), /*#__PURE__*/_jsx(\"div\", {\n      children: orders !== null && orders !== void 0 && orders.length ? /*#__PURE__*/_jsx(Table, {\n        header: /*#__PURE__*/_jsx(Header, {}),\n        row: /*#__PURE__*/_jsx(Row, {\n          data: orders,\n          setOrder: setOrder,\n          setShowDetails: setShowDetails\n        })\n      }) : \"سفارشی یافت نشد\"\n    }), showDetails ? /*#__PURE__*/_jsxs(GolModal, {\n      children: [/*#__PURE__*/_jsx(\"h2\", {\n        children: \"\\u062C\\u0632\\u0626\\u06CC\\u0627\\u062A \\u0633\\u0641\\u0627\\u0631\\u0634\"\n      }), /*#__PURE__*/_jsx(\"br\", {}), /*#__PURE__*/_jsxs(\"div\", {\n        children: [/*#__PURE__*/_jsx(\"h4\", {\n          children: \"\\u0648\\u0636\\u0639\\u06CC\\u062A\"\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: classes.data,\n          children: changeStatus ? /*#__PURE__*/_jsx(ChangeStatus, {\n            order: order,\n            setOrders: setOrders,\n            setOrder: setOrder,\n            status: order === null || order === void 0 ? void 0 : order.status,\n            setChangeStatus: setChangeStatus\n          }) : /*#__PURE__*/_jsxs(_Fragment, {\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              children: order === null || order === void 0 ? void 0 : order.status\n            }), /*#__PURE__*/_jsx(\"span\", {\n              onClick: () => setChangeStatus(true),\n              children: \"\\u062A\\u063A\\u06CC\\u06CC\\u0631 \\u0648\\u0636\\u0639\\u06CC\\u062A\"\n            })]\n          })\n        })]\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        children: [/*#__PURE__*/_jsx(\"h4\", {\n          children: \"\\u0627\\u0637\\u0644\\u0627\\u0639\\u0627\\u062A \\u0645\\u0634\\u062A\\u0631\\u06CC\"\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: classes.data,\n          children: [/*#__PURE__*/_jsx(\"div\", {\n            children: order === null || order === void 0 ? void 0 : (_order$customer = order.customer) === null || _order$customer === void 0 ? void 0 : _order$customer.firstName\n          }), /*#__PURE__*/_jsx(\"div\", {\n            children: order === null || order === void 0 ? void 0 : (_order$customer2 = order.customer) === null || _order$customer2 === void 0 ? void 0 : _order$customer2.lastName\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            children: [order === null || order === void 0 ? void 0 : (_order$customer3 = order.customer) === null || _order$customer3 === void 0 ? void 0 : _order$customer3.countryCode, order === null || order === void 0 ? void 0 : (_order$customer4 = order.customer) === null || _order$customer4 === void 0 ? void 0 : _order$customer4.phoneNumber]\n          }), /*#__PURE__*/_jsx(\"div\", {\n            children: order === null || order === void 0 ? void 0 : (_order$customer5 = order.customer) === null || _order$customer5 === void 0 ? void 0 : _order$customer5.email\n          })]\n        })]\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        children: [/*#__PURE__*/_jsx(\"h4\", {\n          children: \"\\u0633\\u0641\\u0627\\u0631\\u0634\\u0627\\u062A\"\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: classes.data,\n          children: order === null || order === void 0 ? void 0 : (_order$items = order.items) === null || _order$items === void 0 ? void 0 : _order$items.map(el => {\n            var _el$item, _el$item2;\n\n            let selectedSize = el === null || el === void 0 ? void 0 : el.size;\n            let allSizes = el === null || el === void 0 ? void 0 : (_el$item = el.item) === null || _el$item === void 0 ? void 0 : _el$item.sizes;\n            let filterSize = allSizes.find(el => (el === null || el === void 0 ? void 0 : el._id) === selectedSize);\n            return /*#__PURE__*/_jsxs(\"div\", {\n              className: classes.items,\n              children: [/*#__PURE__*/_jsx(\"div\", {\n                children: el === null || el === void 0 ? void 0 : (_el$item2 = el.item) === null || _el$item2 === void 0 ? void 0 : _el$item2.name\n              }), /*#__PURE__*/_jsx(\"div\", {\n                children: filterSize === null || filterSize === void 0 ? void 0 : filterSize.size\n              }), /*#__PURE__*/_jsx(\"div\", {\n                children: filterSize === null || filterSize === void 0 ? void 0 : filterSize.price\n              })]\n            }, el === null || el === void 0 ? void 0 : el._id);\n          })\n        })]\n      }), /*#__PURE__*/_jsx(\"br\", {}), /*#__PURE__*/_jsx(\"div\", {\n        children: /*#__PURE__*/_jsx(GolButton, {\n          color: \"primary\",\n          variant: \"contained\",\n          onClick: () => setShowDetails(false),\n          children: \"\\u0628\\u0633\\u062A\\u0646 \\u067E\\u0646\\u062C\\u0631\\u0647\"\n        })\n      })]\n    }) : null]\n  });\n};\n\nexport default Orders;","map":null,"metadata":{},"sourceType":"module"}