{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React, { useEffect, useState } from \"react\";\nimport useOrdersStyles from \"./useOrdersStyles\";\nimport OrdersMessages from \"./Orders.message\";\nimport { useIntl } from \"react-intl\";\nimport { api } from \"domains/api\";\nimport axios from \"axios\";\nimport Table from \"components/Table\";\nimport GolModal from \"components/GolModal/GolModal\";\nimport GolButton from \"components/GolButton/GolButton\";\nimport ChangeStatus from \"./components/ChangeStatus\";\nimport { socket } from \"utils/socket\";\n\nvar Header = function Header() {\n  return /*#__PURE__*/_jsxs(\"tr\", {\n    children: [/*#__PURE__*/_jsx(\"th\", {\n      children: \"Customer Name\"\n    }), /*#__PURE__*/_jsx(\"th\", {\n      children: \"Customer Phone\"\n    }), /*#__PURE__*/_jsx(\"th\", {\n      children: \"Items\"\n    }), /*#__PURE__*/_jsx(\"th\", {\n      children: \"Status\"\n    })]\n  });\n};\n\nvar Row = function Row(_ref) {\n  var data = _ref.data,\n      setOrder = _ref.setOrder;\n  return /*#__PURE__*/_jsx(_Fragment, {\n    children: data === null || data === void 0 ? void 0 : data.map(function (el) {\n      var _el$customer, _el$customer2, _el$items;\n\n      return /*#__PURE__*/_jsxs(\"tr\", {\n        onClick: function onClick() {\n          return setOrder(el);\n        },\n        children: [/*#__PURE__*/_jsx(\"td\", {\n          children: el === null || el === void 0 ? void 0 : (_el$customer = el.customer) === null || _el$customer === void 0 ? void 0 : _el$customer.email\n        }), /*#__PURE__*/_jsx(\"td\", {\n          children: el === null || el === void 0 ? void 0 : (_el$customer2 = el.customer) === null || _el$customer2 === void 0 ? void 0 : _el$customer2.phoneNumber\n        }), /*#__PURE__*/_jsx(\"td\", {\n          children: el === null || el === void 0 ? void 0 : (_el$items = el.items) === null || _el$items === void 0 ? void 0 : _el$items.length\n        }), /*#__PURE__*/_jsx(\"td\", {\n          children: el === null || el === void 0 ? void 0 : el.status\n        })]\n      }, el === null || el === void 0 ? void 0 : el._id);\n    })\n  });\n};\n\nvar Orders = function Orders() {\n  var _order$customer, _order$customer2, _order$customer3, _order$customer4, _order$customer5, _order$customer6, _order$items;\n\n  var _useIntl = useIntl(),\n      formatMessage = _useIntl.formatMessage;\n\n  var _useState = useState([]),\n      orders = _useState[0],\n      setOrders = _useState[1];\n\n  var _useState2 = useState(null),\n      order = _useState2[0],\n      setOrder = _useState2[1];\n\n  var _useState3 = useState(false),\n      changeStatus = _useState3[0],\n      setChangeStatus = _useState3[1];\n\n  var classes = useOrdersStyles({\n    changeStatus: changeStatus\n  });\n  console.log(socket);\n  useEffect(function () {\n    axios.get(\"\".concat(api, \"/api/order\"), {\n      headers: {\n        \"x-auth-token\": localStorage.token\n      }\n    }).then(function (res) {\n      setOrders(res === null || res === void 0 ? void 0 : res.data);\n    })[\"catch\"](function (err) {\n      return console.log(err);\n    });\n  }, []);\n  console.log(socket);\n  return /*#__PURE__*/_jsxs(\"div\", {\n    children: [/*#__PURE__*/_jsx(\"h1\", {\n      children: formatMessage(OrdersMessages.orders)\n    }), /*#__PURE__*/_jsx(\"br\", {}), /*#__PURE__*/_jsx(\"div\", {\n      children: orders !== null && orders !== void 0 && orders.length ? /*#__PURE__*/_jsx(Table, {\n        header: /*#__PURE__*/_jsx(Header, {}),\n        row: /*#__PURE__*/_jsx(Row, {\n          data: orders,\n          setOrder: setOrder\n        })\n      }) : \"No Orders\"\n    }), order !== null && order !== void 0 && (_order$customer = order.customer) !== null && _order$customer !== void 0 && _order$customer.firstName ? /*#__PURE__*/_jsxs(GolModal, {\n      children: [/*#__PURE__*/_jsx(\"h2\", {\n        children: \"Order details\"\n      }), /*#__PURE__*/_jsx(\"br\", {}), /*#__PURE__*/_jsxs(\"div\", {\n        children: [/*#__PURE__*/_jsx(\"h4\", {\n          children: \"Status\"\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: classes.data,\n          children: changeStatus ? /*#__PURE__*/_jsx(ChangeStatus, {\n            order: order,\n            setOrders: setOrders,\n            setOrder: setOrder,\n            status: order === null || order === void 0 ? void 0 : order.status,\n            setChangeStatus: setChangeStatus\n          }) : /*#__PURE__*/_jsxs(_Fragment, {\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              children: order === null || order === void 0 ? void 0 : order.status\n            }), /*#__PURE__*/_jsx(\"span\", {\n              onClick: function onClick() {\n                return setChangeStatus(true);\n              },\n              children: \"change status\"\n            })]\n          })\n        })]\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        children: [/*#__PURE__*/_jsx(\"h4\", {\n          children: \"Customer\"\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: classes.data,\n          children: [/*#__PURE__*/_jsx(\"div\", {\n            children: order === null || order === void 0 ? void 0 : (_order$customer2 = order.customer) === null || _order$customer2 === void 0 ? void 0 : _order$customer2.firstName\n          }), /*#__PURE__*/_jsx(\"div\", {\n            children: order === null || order === void 0 ? void 0 : (_order$customer3 = order.customer) === null || _order$customer3 === void 0 ? void 0 : _order$customer3.lastName\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            children: [order === null || order === void 0 ? void 0 : (_order$customer4 = order.customer) === null || _order$customer4 === void 0 ? void 0 : _order$customer4.countryCode, order === null || order === void 0 ? void 0 : (_order$customer5 = order.customer) === null || _order$customer5 === void 0 ? void 0 : _order$customer5.phoneNumber]\n          }), /*#__PURE__*/_jsx(\"div\", {\n            children: order === null || order === void 0 ? void 0 : (_order$customer6 = order.customer) === null || _order$customer6 === void 0 ? void 0 : _order$customer6.email\n          })]\n        })]\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        children: [/*#__PURE__*/_jsx(\"h4\", {\n          children: \"Items\"\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: classes.data,\n          children: order === null || order === void 0 ? void 0 : (_order$items = order.items) === null || _order$items === void 0 ? void 0 : _order$items.map(function (el) {\n            var _el$item, _el$item2;\n\n            var selectedSize = el === null || el === void 0 ? void 0 : el.size;\n            var allSizes = el === null || el === void 0 ? void 0 : (_el$item = el.item) === null || _el$item === void 0 ? void 0 : _el$item.sizes;\n            var filterSize = allSizes.find(function (el) {\n              return (el === null || el === void 0 ? void 0 : el._id) === selectedSize;\n            });\n            return /*#__PURE__*/_jsxs(\"div\", {\n              className: classes.items,\n              children: [/*#__PURE__*/_jsx(\"div\", {\n                children: el === null || el === void 0 ? void 0 : (_el$item2 = el.item) === null || _el$item2 === void 0 ? void 0 : _el$item2.name\n              }), /*#__PURE__*/_jsx(\"div\", {\n                children: filterSize === null || filterSize === void 0 ? void 0 : filterSize.size\n              }), /*#__PURE__*/_jsx(\"div\", {\n                children: filterSize === null || filterSize === void 0 ? void 0 : filterSize.price\n              })]\n            }, el === null || el === void 0 ? void 0 : el._id);\n          })\n        })]\n      }), /*#__PURE__*/_jsx(\"br\", {}), /*#__PURE__*/_jsx(\"div\", {\n        children: /*#__PURE__*/_jsx(GolButton, {\n          color: \"primary\",\n          variant: \"contained\",\n          onClick: function onClick() {\n            return setOrder(null);\n          },\n          children: \"close modal\"\n        })\n      })]\n    }) : null]\n  });\n};\n\nexport default Orders;","map":null,"metadata":{},"sourceType":"module"}