{"level":"error","message":"Operation `users.findOne()` buffering timed out after 10000ms Operation `users.findOne()` buffering timed out after 10000ms","stack":"MongooseError: Operation `users.findOne()` buffering timed out after 10000ms\n    at Timeout.<anonymous> (/home/mohammad/projects/dorreh/market/back/node_modules/mongoose/lib/drivers/node-mongodb-native/collection.js:185:20)\n    at listOnTimeout (internal/timers.js:554:17)\n    at processTimers (internal/timers.js:497:7)"}
{"level":"error","message":"Operation `users.findOne()` buffering timed out after 10000ms Operation `users.findOne()` buffering timed out after 10000ms","stack":"MongooseError: Operation `users.findOne()` buffering timed out after 10000ms\n    at Timeout.<anonymous> (/home/mohammad/projects/dorreh/market/back/node_modules/mongoose/lib/drivers/node-mongodb-native/collection.js:185:20)\n    at listOnTimeout (internal/timers.js:554:17)\n    at processTimers (internal/timers.js:497:7)"}
{"level":"error","message":"Operation `users.findOne()` buffering timed out after 10000ms Operation `users.findOne()` buffering timed out after 10000ms","stack":"MongooseError: Operation `users.findOne()` buffering timed out after 10000ms\n    at Timeout.<anonymous> (/home/mohammad/projects/dorreh/market/back/node_modules/mongoose/lib/drivers/node-mongodb-native/collection.js:185:20)\n    at listOnTimeout (internal/timers.js:554:17)\n    at processTimers (internal/timers.js:497:7)"}
{"level":"error","message":"Operation `users.findOne()` buffering timed out after 10000ms Operation `users.findOne()` buffering timed out after 10000ms","stack":"MongooseError: Operation `users.findOne()` buffering timed out after 10000ms\n    at Timeout.<anonymous> (/home/mohammad/projects/dorreh/market/back/node_modules/mongoose/lib/drivers/node-mongodb-native/collection.js:185:20)\n    at listOnTimeout (internal/timers.js:554:17)\n    at processTimers (internal/timers.js:497:7)"}
{"errors":{"countryCode":{"name":"ValidatorError","message":"Path `countryCode` is required.","properties":{"message":"Path `countryCode` is required.","type":"required","path":"countryCode"},"kind":"required","path":"countryCode"}},"_message":"user validation failed","level":"error","message":"user validation failed: countryCode: Path `countryCode` is required. user validation failed: countryCode: Path `countryCode` is required.","stack":"ValidationError: user validation failed: countryCode: Path `countryCode` is required.\n    at model.Document.invalidate (/home/mohammad/projects/dorreh/market/back/node_modules/mongoose/lib/document.js:2692:32)\n    at /home/mohammad/projects/dorreh/market/back/node_modules/mongoose/lib/document.js:2512:17\n    at /home/mohammad/projects/dorreh/market/back/node_modules/mongoose/lib/schematype.js:1238:9\n    at processTicksAndRejections (internal/process/task_queues.js:75:11)"}
{"driver":true,"name":"MongoError","index":0,"code":11000,"keyPattern":{"phoneNumber":1},"keyValue":{"phoneNumber":9123456789},"level":"error","message":"E11000 duplicate key error collection: ma2web.users index: phoneNumber_1 dup key: { phoneNumber: 9123456789.0 } E11000 duplicate key error collection: ma2web.users index: phoneNumber_1 dup key: { phoneNumber: 9123456789.0 }","stack":"MongoError: E11000 duplicate key error collection: ma2web.users index: phoneNumber_1 dup key: { phoneNumber: 9123456789.0 }\n    at Function.create (/home/mohammad/projects/dorreh/market/back/node_modules/mongodb/lib/core/error.js:57:12)\n    at toError (/home/mohammad/projects/dorreh/market/back/node_modules/mongodb/lib/utils.js:123:22)\n    at /home/mohammad/projects/dorreh/market/back/node_modules/mongodb/lib/operations/common_functions.js:265:39\n    at handler (/home/mohammad/projects/dorreh/market/back/node_modules/mongodb/lib/core/sdam/topology.js:942:24)\n    at /home/mohammad/projects/dorreh/market/back/node_modules/mongodb/lib/cmap/connection_pool.js:350:13\n    at handleOperationResult (/home/mohammad/projects/dorreh/market/back/node_modules/mongodb/lib/core/sdam/server.js:558:5)\n    at MessageStream.messageHandler (/home/mohammad/projects/dorreh/market/back/node_modules/mongodb/lib/cmap/connection.js:277:5)\n    at MessageStream.emit (events.js:315:20)\n    at processIncomingData (/home/mohammad/projects/dorreh/market/back/node_modules/mongodb/lib/cmap/message_stream.js:144:12)\n    at MessageStream._write (/home/mohammad/projects/dorreh/market/back/node_modules/mongodb/lib/cmap/message_stream.js:42:5)\n    at writeOrBuffer (internal/streams/writable.js:358:12)\n    at MessageStream.Writable.write (internal/streams/writable.js:303:10)\n    at Socket.ondata (internal/streams/readable.js:719:22)\n    at Socket.emit (events.js:315:20)\n    at addChunk (internal/streams/readable.js:309:12)\n    at readableAddChunk (internal/streams/readable.js:284:9)"}
{"driver":true,"name":"MongoError","index":0,"code":11000,"keyPattern":{"phoneNumber":1},"keyValue":{"phoneNumber":9123456789},"level":"error","message":"E11000 duplicate key error collection: ma2web.users index: phoneNumber_1 dup key: { phoneNumber: 9123456789.0 } E11000 duplicate key error collection: ma2web.users index: phoneNumber_1 dup key: { phoneNumber: 9123456789.0 }","stack":"MongoError: E11000 duplicate key error collection: ma2web.users index: phoneNumber_1 dup key: { phoneNumber: 9123456789.0 }\n    at Function.create (/home/mohammad/projects/dorreh/market/back/node_modules/mongodb/lib/core/error.js:57:12)\n    at toError (/home/mohammad/projects/dorreh/market/back/node_modules/mongodb/lib/utils.js:123:22)\n    at /home/mohammad/projects/dorreh/market/back/node_modules/mongodb/lib/operations/common_functions.js:265:39\n    at handler (/home/mohammad/projects/dorreh/market/back/node_modules/mongodb/lib/core/sdam/topology.js:942:24)\n    at /home/mohammad/projects/dorreh/market/back/node_modules/mongodb/lib/cmap/connection_pool.js:350:13\n    at handleOperationResult (/home/mohammad/projects/dorreh/market/back/node_modules/mongodb/lib/core/sdam/server.js:558:5)\n    at MessageStream.messageHandler (/home/mohammad/projects/dorreh/market/back/node_modules/mongodb/lib/cmap/connection.js:277:5)\n    at MessageStream.emit (events.js:315:20)\n    at processIncomingData (/home/mohammad/projects/dorreh/market/back/node_modules/mongodb/lib/cmap/message_stream.js:144:12)\n    at MessageStream._write (/home/mohammad/projects/dorreh/market/back/node_modules/mongodb/lib/cmap/message_stream.js:42:5)\n    at writeOrBuffer (internal/streams/writable.js:358:12)\n    at MessageStream.Writable.write (internal/streams/writable.js:303:10)\n    at Socket.ondata (internal/streams/readable.js:719:22)\n    at Socket.emit (events.js:315:20)\n    at addChunk (internal/streams/readable.js:309:12)\n    at readableAddChunk (internal/streams/readable.js:284:9)"}
{"level":"error","message":"Cannot read property 'role' of undefined Cannot read property 'role' of undefined","stack":"TypeError: Cannot read property 'role' of undefined\n    at module.exports (/home/mohammad/projects/dorreh/market/back/middlwares/admin.js:2:16)\n    at newFn (/home/mohammad/projects/dorreh/market/back/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/route.js:137:13)\n    at Route.dispatch (/home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/route.js:112:3)\n    at newFn (/home/mohammad/projects/dorreh/market/back/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/layer.js:95:5)\n    at /home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/index.js:281:22\n    at Function.process_params (/home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/index.js:335:12)\n    at next (/home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/index.js:275:10)\n    at Function.handle (/home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/index.js:174:3)\n    at router (/home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/index.js:47:12)\n    at newFn (/home/mohammad/projects/dorreh/market/back/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/index.js:317:13)\n    at /home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/index.js:284:7"}
{"level":"error","message":"Cannot read property 'role' of undefined Cannot read property 'role' of undefined","stack":"TypeError: Cannot read property 'role' of undefined\n    at module.exports (/home/mohammad/projects/dorreh/market/back/middlwares/admin.js:2:16)\n    at newFn (/home/mohammad/projects/dorreh/market/back/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/route.js:137:13)\n    at Route.dispatch (/home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/route.js:112:3)\n    at newFn (/home/mohammad/projects/dorreh/market/back/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/layer.js:95:5)\n    at /home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/index.js:281:22\n    at Function.process_params (/home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/index.js:335:12)\n    at next (/home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/index.js:275:10)\n    at Function.handle (/home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/index.js:174:3)\n    at router (/home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/index.js:47:12)\n    at newFn (/home/mohammad/projects/dorreh/market/back/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/index.js:317:13)\n    at /home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/index.js:284:7"}
{"level":"error","message":"Cannot read property 'role' of undefined Cannot read property 'role' of undefined","stack":"TypeError: Cannot read property 'role' of undefined\n    at module.exports (/home/mohammad/projects/dorreh/market/back/middlwares/admin.js:3:16)\n    at newFn (/home/mohammad/projects/dorreh/market/back/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/route.js:137:13)\n    at Route.dispatch (/home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/route.js:112:3)\n    at newFn (/home/mohammad/projects/dorreh/market/back/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/layer.js:95:5)\n    at /home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/index.js:281:22\n    at Function.process_params (/home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/index.js:335:12)\n    at next (/home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/index.js:275:10)\n    at Function.handle (/home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/index.js:174:3)\n    at router (/home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/index.js:47:12)\n    at newFn (/home/mohammad/projects/dorreh/market/back/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/index.js:317:13)\n    at /home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/index.js:284:7"}
{"errors":{"image":{"stringValue":"\"[ 'image-12321823.jpg' ]\"","kind":"string","value":["image-12321823.jpg"],"path":"image","reason":null}},"_message":"category validation failed","level":"error","message":"category validation failed: image: Cast to string failed for value \"[ 'image-12321823.jpg' ]\" at path \"image\" category validation failed: image: Cast to string failed for value \"[ 'image-12321823.jpg' ]\" at path \"image\"","stack":"ValidationError: category validation failed: image: Cast to string failed for value \"[ 'image-12321823.jpg' ]\" at path \"image\"\n    at model.Document.invalidate (/home/mohammad/projects/dorreh/market/back/node_modules/mongoose/lib/document.js:2692:32)\n    at model.$set (/home/mohammad/projects/dorreh/market/back/node_modules/mongoose/lib/document.js:1305:12)\n    at model.$set (/home/mohammad/projects/dorreh/market/back/node_modules/mongoose/lib/document.js:1009:16)\n    at model.Document (/home/mohammad/projects/dorreh/market/back/node_modules/mongoose/lib/document.js:149:12)\n    at model.Model (/home/mohammad/projects/dorreh/market/back/node_modules/mongoose/lib/model.js:105:12)\n    at new model (/home/mohammad/projects/dorreh/market/back/node_modules/mongoose/lib/model.js:4700:15)\n    at create (/home/mohammad/projects/dorreh/market/back/controllers/category.js:22:21)\n    at newFn (/home/mohammad/projects/dorreh/market/back/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/route.js:137:13)\n    at module.exports (/home/mohammad/projects/dorreh/market/back/middlwares/auth.js:11:5)\n    at newFn (/home/mohammad/projects/dorreh/market/back/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/route.js:137:13)\n    at Route.dispatch (/home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/route.js:112:3)\n    at newFn (/home/mohammad/projects/dorreh/market/back/node_modules/express-async-errors/index.js:16:20)"}
{"errors":{"image":{"stringValue":"\"[ 'image-12321823.jpg' ]\"","kind":"string","value":["image-12321823.jpg"],"path":"image","reason":null}},"_message":"category validation failed","level":"error","message":"category validation failed: image: Cast to string failed for value \"[ 'image-12321823.jpg' ]\" at path \"image\" category validation failed: image: Cast to string failed for value \"[ 'image-12321823.jpg' ]\" at path \"image\"","stack":"ValidationError: category validation failed: image: Cast to string failed for value \"[ 'image-12321823.jpg' ]\" at path \"image\"\n    at model.Document.invalidate (/home/mohammad/projects/dorreh/market/back/node_modules/mongoose/lib/document.js:2692:32)\n    at model.$set (/home/mohammad/projects/dorreh/market/back/node_modules/mongoose/lib/document.js:1305:12)\n    at model.$set (/home/mohammad/projects/dorreh/market/back/node_modules/mongoose/lib/document.js:1009:16)\n    at model.Document (/home/mohammad/projects/dorreh/market/back/node_modules/mongoose/lib/document.js:149:12)\n    at model.Model (/home/mohammad/projects/dorreh/market/back/node_modules/mongoose/lib/model.js:105:12)\n    at new model (/home/mohammad/projects/dorreh/market/back/node_modules/mongoose/lib/model.js:4700:15)\n    at create (/home/mohammad/projects/dorreh/market/back/controllers/category.js:22:21)\n    at newFn (/home/mohammad/projects/dorreh/market/back/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/route.js:137:13)\n    at module.exports (/home/mohammad/projects/dorreh/market/back/middlwares/auth.js:11:5)\n    at newFn (/home/mohammad/projects/dorreh/market/back/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/route.js:137:13)\n    at Route.dispatch (/home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/route.js:112:3)\n    at newFn (/home/mohammad/projects/dorreh/market/back/node_modules/express-async-errors/index.js:16:20)"}
{"errors":{"image":{"stringValue":"\"[ 'image-12321823.jpg' ]\"","kind":"string","value":["image-12321823.jpg"],"path":"image","reason":null}},"_message":"category validation failed","level":"error","message":"category validation failed: image: Cast to string failed for value \"[ 'image-12321823.jpg' ]\" at path \"image\" category validation failed: image: Cast to string failed for value \"[ 'image-12321823.jpg' ]\" at path \"image\"","stack":"ValidationError: category validation failed: image: Cast to string failed for value \"[ 'image-12321823.jpg' ]\" at path \"image\"\n    at model.Document.invalidate (/home/mohammad/projects/dorreh/market/back/node_modules/mongoose/lib/document.js:2692:32)\n    at model.$set (/home/mohammad/projects/dorreh/market/back/node_modules/mongoose/lib/document.js:1305:12)\n    at model.$set (/home/mohammad/projects/dorreh/market/back/node_modules/mongoose/lib/document.js:1009:16)\n    at model.Document (/home/mohammad/projects/dorreh/market/back/node_modules/mongoose/lib/document.js:149:12)\n    at model.Model (/home/mohammad/projects/dorreh/market/back/node_modules/mongoose/lib/model.js:105:12)\n    at new model (/home/mohammad/projects/dorreh/market/back/node_modules/mongoose/lib/model.js:4700:15)\n    at create (/home/mohammad/projects/dorreh/market/back/controllers/category.js:20:19)\n    at newFn (/home/mohammad/projects/dorreh/market/back/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/route.js:137:13)\n    at module.exports (/home/mohammad/projects/dorreh/market/back/middlwares/auth.js:11:5)\n    at newFn (/home/mohammad/projects/dorreh/market/back/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/route.js:137:13)\n    at Route.dispatch (/home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/route.js:112:3)\n    at newFn (/home/mohammad/projects/dorreh/market/back/node_modules/express-async-errors/index.js:16:20)"}
{"level":"error","message":"Cannot read property '_id' of undefined Cannot read property '_id' of undefined","stack":"TypeError: Cannot read property '_id' of undefined\n    at addComment (/home/mohammad/projects/dorreh/market/back/controllers/product.js:87:49)\n    at processTicksAndRejections (internal/process/task_queues.js:93:5)"}
{"level":"error","message":"Cannot read property '_id' of undefined Cannot read property '_id' of undefined","stack":"TypeError: Cannot read property '_id' of undefined\n    at addComment (/home/mohammad/projects/dorreh/market/back/controllers/product.js:87:49)\n    at processTicksAndRejections (internal/process/task_queues.js:93:5)"}
{"level":"error","message":"Cannot read property '_id' of undefined Cannot read property '_id' of undefined","stack":"TypeError: Cannot read property '_id' of undefined\n    at addComment (/home/mohammad/projects/dorreh/market/back/controllers/product.js:88:49)\n    at processTicksAndRejections (internal/process/task_queues.js:93:5)"}
{"level":"error","message":"rating is not defined rating is not defined","stack":"ReferenceError: rating is not defined\n    at addComment (/home/mohammad/projects/dorreh/market/back/controllers/product.js:88:5)\n    at processTicksAndRejections (internal/process/task_queues.js:93:5)"}
{"level":"error","message":"Invalid sort() argument. Must be a string, object, or array. Invalid sort() argument. Must be a string, object, or array.","stack":"TypeError: Invalid sort() argument. Must be a string, object, or array.\n    at model.Query.Query.sort (/home/mohammad/projects/dorreh/market/back/node_modules/mquery/lib/mquery.js:1292:9)\n    at model.Query.Query.sort (/home/mohammad/projects/dorreh/market/back/node_modules/mongoose/lib/query.js:2553:26)\n    at filter (/home/mohammad/projects/dorreh/market/back/controllers/product.js:212:41)\n    at newFn (/home/mohammad/projects/dorreh/market/back/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/route.js:137:13)\n    at module.exports (/home/mohammad/projects/dorreh/market/back/middlwares/auth.js:11:5)\n    at newFn (/home/mohammad/projects/dorreh/market/back/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/route.js:137:13)\n    at Route.dispatch (/home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/route.js:112:3)\n    at newFn (/home/mohammad/projects/dorreh/market/back/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/layer.js:95:5)\n    at /home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/index.js:281:22\n    at param (/home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/index.js:354:14)\n    at param (/home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/index.js:365:14)"}
{"errors":{"sizes.1.size":{"name":"ValidatorError","message":"Path `size` is required.","properties":{"message":"Path `size` is required.","type":"required","path":"size"},"kind":"required","path":"size"}},"_message":"product validation failed","level":"error","message":"product validation failed: sizes.1.size: Path `size` is required. product validation failed: sizes.1.size: Path `size` is required.","stack":"ValidationError: product validation failed: sizes.1.size: Path `size` is required.\n    at model.Document.invalidate (/home/mohammad/projects/dorreh/market/back/node_modules/mongoose/lib/document.js:2692:32)\n    at EmbeddedDocument.invalidate (/home/mohammad/projects/dorreh/market/back/node_modules/mongoose/lib/types/embedded.js:297:29)\n    at /home/mohammad/projects/dorreh/market/back/node_modules/mongoose/lib/document.js:2512:17\n    at /home/mohammad/projects/dorreh/market/back/node_modules/mongoose/lib/schematype.js:1238:9\n    at processTicksAndRejections (internal/process/task_queues.js:75:11)"}
{"errors":{"sizes.1.size":{"name":"ValidatorError","message":"Path `size` is required.","properties":{"message":"Path `size` is required.","type":"required","path":"size"},"kind":"required","path":"size"}},"_message":"product validation failed","level":"error","message":"product validation failed: sizes.1.size: Path `size` is required. product validation failed: sizes.1.size: Path `size` is required.","stack":"ValidationError: product validation failed: sizes.1.size: Path `size` is required.\n    at model.Document.invalidate (/home/mohammad/projects/dorreh/market/back/node_modules/mongoose/lib/document.js:2692:32)\n    at EmbeddedDocument.invalidate (/home/mohammad/projects/dorreh/market/back/node_modules/mongoose/lib/types/embedded.js:297:29)\n    at /home/mohammad/projects/dorreh/market/back/node_modules/mongoose/lib/document.js:2512:17\n    at /home/mohammad/projects/dorreh/market/back/node_modules/mongoose/lib/schematype.js:1238:9\n    at processTicksAndRejections (internal/process/task_queues.js:75:11)"}
{"errors":{"sizes.1.size":{"name":"ValidatorError","message":"Path `size` is required.","properties":{"message":"Path `size` is required.","type":"required","path":"size"},"kind":"required","path":"size"}},"_message":"product validation failed","level":"error","message":"product validation failed: sizes.1.size: Path `size` is required. product validation failed: sizes.1.size: Path `size` is required.","stack":"ValidationError: product validation failed: sizes.1.size: Path `size` is required.\n    at model.Document.invalidate (/home/mohammad/projects/dorreh/market/back/node_modules/mongoose/lib/document.js:2692:32)\n    at EmbeddedDocument.invalidate (/home/mohammad/projects/dorreh/market/back/node_modules/mongoose/lib/types/embedded.js:297:29)\n    at /home/mohammad/projects/dorreh/market/back/node_modules/mongoose/lib/document.js:2512:17\n    at /home/mohammad/projects/dorreh/market/back/node_modules/mongoose/lib/schematype.js:1238:9\n    at processTicksAndRejections (internal/process/task_queues.js:75:11)"}
{"errors":{"sizes.3.size":{"name":"ValidatorError","message":"Path `size` is required.","properties":{"message":"Path `size` is required.","type":"required","path":"size"},"kind":"required","path":"size"}},"_message":"product validation failed","level":"error","message":"product validation failed: sizes.3.size: Path `size` is required. product validation failed: sizes.3.size: Path `size` is required.","stack":"ValidationError: product validation failed: sizes.3.size: Path `size` is required.\n    at model.Document.invalidate (/home/mohammad/projects/dorreh/market/back/node_modules/mongoose/lib/document.js:2692:32)\n    at EmbeddedDocument.invalidate (/home/mohammad/projects/dorreh/market/back/node_modules/mongoose/lib/types/embedded.js:297:29)\n    at /home/mohammad/projects/dorreh/market/back/node_modules/mongoose/lib/document.js:2512:17\n    at /home/mohammad/projects/dorreh/market/back/node_modules/mongoose/lib/schematype.js:1238:9\n    at processTicksAndRejections (internal/process/task_queues.js:75:11)"}
{"errors":{"sizes.3.size":{"name":"ValidatorError","message":"Path `size` is required.","properties":{"message":"Path `size` is required.","type":"required","path":"size"},"kind":"required","path":"size"}},"_message":"product validation failed","level":"error","message":"product validation failed: sizes.3.size: Path `size` is required. product validation failed: sizes.3.size: Path `size` is required.","stack":"ValidationError: product validation failed: sizes.3.size: Path `size` is required.\n    at model.Document.invalidate (/home/mohammad/projects/dorreh/market/back/node_modules/mongoose/lib/document.js:2692:32)\n    at EmbeddedDocument.invalidate (/home/mohammad/projects/dorreh/market/back/node_modules/mongoose/lib/types/embedded.js:297:29)\n    at /home/mohammad/projects/dorreh/market/back/node_modules/mongoose/lib/document.js:2512:17\n    at /home/mohammad/projects/dorreh/market/back/node_modules/mongoose/lib/schematype.js:1238:9\n    at processTicksAndRejections (internal/process/task_queues.js:75:11)"}
{"errors":{"sizes.3.size":{"name":"ValidatorError","message":"Path `size` is required.","properties":{"message":"Path `size` is required.","type":"required","path":"size"},"kind":"required","path":"size"}},"_message":"product validation failed","level":"error","message":"product validation failed: sizes.3.size: Path `size` is required. product validation failed: sizes.3.size: Path `size` is required.","stack":"ValidationError: product validation failed: sizes.3.size: Path `size` is required.\n    at model.Document.invalidate (/home/mohammad/projects/dorreh/market/back/node_modules/mongoose/lib/document.js:2692:32)\n    at EmbeddedDocument.invalidate (/home/mohammad/projects/dorreh/market/back/node_modules/mongoose/lib/types/embedded.js:297:29)\n    at /home/mohammad/projects/dorreh/market/back/node_modules/mongoose/lib/document.js:2512:17\n    at /home/mohammad/projects/dorreh/market/back/node_modules/mongoose/lib/schematype.js:1238:9\n    at processTicksAndRejections (internal/process/task_queues.js:75:11)"}
{"errors":{"sizes.3.size":{"name":"ValidatorError","message":"Path `size` is required.","properties":{"message":"Path `size` is required.","type":"required","path":"size"},"kind":"required","path":"size"}},"_message":"product validation failed","level":"error","message":"product validation failed: sizes.3.size: Path `size` is required. product validation failed: sizes.3.size: Path `size` is required.","stack":"ValidationError: product validation failed: sizes.3.size: Path `size` is required.\n    at model.Document.invalidate (/home/mohammad/projects/dorreh/market/back/node_modules/mongoose/lib/document.js:2692:32)\n    at EmbeddedDocument.invalidate (/home/mohammad/projects/dorreh/market/back/node_modules/mongoose/lib/types/embedded.js:297:29)\n    at /home/mohammad/projects/dorreh/market/back/node_modules/mongoose/lib/document.js:2512:17\n    at /home/mohammad/projects/dorreh/market/back/node_modules/mongoose/lib/schematype.js:1238:9\n    at processTicksAndRejections (internal/process/task_queues.js:75:11)"}
{"errors":{"sizes.3.size":{"name":"ValidatorError","message":"Path `size` is required.","properties":{"message":"Path `size` is required.","type":"required","path":"size"},"kind":"required","path":"size"}},"_message":"product validation failed","level":"error","message":"product validation failed: sizes.3.size: Path `size` is required. product validation failed: sizes.3.size: Path `size` is required.","stack":"ValidationError: product validation failed: sizes.3.size: Path `size` is required.\n    at model.Document.invalidate (/home/mohammad/projects/dorreh/market/back/node_modules/mongoose/lib/document.js:2692:32)\n    at EmbeddedDocument.invalidate (/home/mohammad/projects/dorreh/market/back/node_modules/mongoose/lib/types/embedded.js:297:29)\n    at /home/mohammad/projects/dorreh/market/back/node_modules/mongoose/lib/document.js:2512:17\n    at /home/mohammad/projects/dorreh/market/back/node_modules/mongoose/lib/schematype.js:1238:9\n    at processTicksAndRejections (internal/process/task_queues.js:75:11)"}
{"level":"error","message":"Cannot read property '_id' of null Cannot read property '_id' of null","stack":"TypeError: Cannot read property '_id' of null\n    at /home/mohammad/projects/dorreh/market/back/controllers/product.js:206:56\n    at CoreDocumentArray.filter (<anonymous>)\n    at CoreDocumentArray.filter (/home/mohammad/projects/dorreh/market/back/node_modules/mongoose/lib/types/core_array.js:856:30)\n    at removeSize (/home/mohammad/projects/dorreh/market/back/controllers/product.js:206:34)\n    at processTicksAndRejections (internal/process/task_queues.js:93:5)"}
{"level":"error","message":"Assignment to constant variable. Assignment to constant variable.","stack":"TypeError: Assignment to constant variable.\n    at removeSize (/home/mohammad/projects/dorreh/market/back/controllers/product.js:210:13)\n    at processTicksAndRejections (internal/process/task_queues.js:93:5)"}
{"errors":{"colors.1.color":{"name":"ValidatorError","message":"`Green` is not a valid enum value for path `color`.","properties":{"message":"`Green` is not a valid enum value for path `color`.","type":"enum","enumValues":["RED","YELLOW","BLUE","GREEN","PINK","BLACK","WHITE"],"path":"color","value":"Green"},"kind":"enum","path":"color","value":"Green"}},"_message":"product validation failed","level":"error","message":"product validation failed: colors.1.color: `Green` is not a valid enum value for path `color`. product validation failed: colors.1.color: `Green` is not a valid enum value for path `color`.","stack":"ValidationError: product validation failed: colors.1.color: `Green` is not a valid enum value for path `color`.\n    at model.Document.invalidate (/home/mohammad/projects/dorreh/market/back/node_modules/mongoose/lib/document.js:2692:32)\n    at EmbeddedDocument.invalidate (/home/mohammad/projects/dorreh/market/back/node_modules/mongoose/lib/types/embedded.js:297:29)\n    at /home/mohammad/projects/dorreh/market/back/node_modules/mongoose/lib/document.js:2512:17\n    at /home/mohammad/projects/dorreh/market/back/node_modules/mongoose/lib/schematype.js:1238:9\n    at processTicksAndRejections (internal/process/task_queues.js:75:11)"}
{"level":"error","message":"Operation `products.find()` buffering timed out after 10000ms Operation `products.find()` buffering timed out after 10000ms","stack":"MongooseError: Operation `products.find()` buffering timed out after 10000ms\n    at Timeout.<anonymous> (/home/mohammad/projects/dorreh/market/back/node_modules/mongoose/lib/drivers/node-mongodb-native/collection.js:185:20)\n    at listOnTimeout (internal/timers.js:554:17)\n    at processTimers (internal/timers.js:497:7)"}
{"level":"error","message":"Operation `categories.find()` buffering timed out after 10000ms Operation `categories.find()` buffering timed out after 10000ms","stack":"MongooseError: Operation `categories.find()` buffering timed out after 10000ms\n    at Timeout.<anonymous> (/home/mohammad/projects/dorreh/market/back/node_modules/mongoose/lib/drivers/node-mongodb-native/collection.js:185:20)\n    at listOnTimeout (internal/timers.js:554:17)\n    at processTimers (internal/timers.js:497:7)"}
{"level":"error","message":"Operation `products.find()` buffering timed out after 10000ms Operation `products.find()` buffering timed out after 10000ms","stack":"MongooseError: Operation `products.find()` buffering timed out after 10000ms\n    at Timeout.<anonymous> (/home/mohammad/projects/dorreh/market/back/node_modules/mongoose/lib/drivers/node-mongodb-native/collection.js:185:20)\n    at listOnTimeout (internal/timers.js:554:17)\n    at processTimers (internal/timers.js:497:7)"}
{"level":"error","message":"Operation `categories.find()` buffering timed out after 10000ms Operation `categories.find()` buffering timed out after 10000ms","stack":"MongooseError: Operation `categories.find()` buffering timed out after 10000ms\n    at Timeout.<anonymous> (/home/mohammad/projects/dorreh/market/back/node_modules/mongoose/lib/drivers/node-mongodb-native/collection.js:185:20)\n    at listOnTimeout (internal/timers.js:554:17)\n    at processTimers (internal/timers.js:497:7)"}
{"errors":{"sizes.0.size":{"name":"ValidatorError","message":"`xs` is not a valid enum value for path `size`.","properties":{"message":"`xs` is not a valid enum value for path `size`.","type":"enum","enumValues":["XXS","XS","S","M","L","XL","XXL"],"path":"size","value":"xs"},"kind":"enum","path":"size","value":"xs"}},"_message":"product validation failed","level":"error","message":"product validation failed: sizes.0.size: `xs` is not a valid enum value for path `size`. product validation failed: sizes.0.size: `xs` is not a valid enum value for path `size`.","stack":"ValidationError: product validation failed: sizes.0.size: `xs` is not a valid enum value for path `size`.\n    at model.Document.invalidate (/home/mohammad/projects/dorreh/market/back/node_modules/mongoose/lib/document.js:2692:32)\n    at EmbeddedDocument.invalidate (/home/mohammad/projects/dorreh/market/back/node_modules/mongoose/lib/types/embedded.js:297:29)\n    at /home/mohammad/projects/dorreh/market/back/node_modules/mongoose/lib/document.js:2512:17\n    at /home/mohammad/projects/dorreh/market/back/node_modules/mongoose/lib/schematype.js:1238:9\n    at processTicksAndRejections (internal/process/task_queues.js:75:11)"}
{"errors":{"sizes.0.size":{"name":"ValidatorError","message":"`xs` is not a valid enum value for path `size`.","properties":{"message":"`xs` is not a valid enum value for path `size`.","type":"enum","enumValues":["XXS","XS","S","M","L","XL","XXL"],"path":"size","value":"xs"},"kind":"enum","path":"size","value":"xs"}},"_message":"product validation failed","level":"error","message":"product validation failed: sizes.0.size: `xs` is not a valid enum value for path `size`. product validation failed: sizes.0.size: `xs` is not a valid enum value for path `size`.","stack":"ValidationError: product validation failed: sizes.0.size: `xs` is not a valid enum value for path `size`.\n    at model.Document.invalidate (/home/mohammad/projects/dorreh/market/back/node_modules/mongoose/lib/document.js:2692:32)\n    at EmbeddedDocument.invalidate (/home/mohammad/projects/dorreh/market/back/node_modules/mongoose/lib/types/embedded.js:297:29)\n    at /home/mohammad/projects/dorreh/market/back/node_modules/mongoose/lib/document.js:2512:17\n    at /home/mohammad/projects/dorreh/market/back/node_modules/mongoose/lib/schematype.js:1238:9\n    at processTicksAndRejections (internal/process/task_queues.js:75:11)"}
{"level":"error","message":"Operation `categories.find()` buffering timed out after 10000ms Operation `categories.find()` buffering timed out after 10000ms","stack":"MongooseError: Operation `categories.find()` buffering timed out after 10000ms\n    at Timeout.<anonymous> (/home/mohammad/projects/dorreh/market/back/node_modules/mongoose/lib/drivers/node-mongodb-native/collection.js:185:20)\n    at listOnTimeout (internal/timers.js:554:17)\n    at processTimers (internal/timers.js:497:7)"}
{"level":"error","message":"Operation `products.insertOne()` buffering timed out after 10000ms Operation `products.insertOne()` buffering timed out after 10000ms","stack":"MongooseError: Operation `products.insertOne()` buffering timed out after 10000ms\n    at Timeout.<anonymous> (/home/mohammad/projects/dorreh/market/back/node_modules/mongoose/lib/drivers/node-mongodb-native/collection.js:185:20)\n    at listOnTimeout (internal/timers.js:554:17)\n    at processTimers (internal/timers.js:497:7)"}
{"level":"error","message":"Operation `products.insertOne()` buffering timed out after 10000ms Operation `products.insertOne()` buffering timed out after 10000ms","stack":"MongooseError: Operation `products.insertOne()` buffering timed out after 10000ms\n    at Timeout.<anonymous> (/home/mohammad/projects/dorreh/market/back/node_modules/mongoose/lib/drivers/node-mongodb-native/collection.js:185:20)\n    at listOnTimeout (internal/timers.js:554:17)\n    at processTimers (internal/timers.js:497:7)"}
{"level":"error","message":"Operation `users.findOne()` buffering timed out after 10000ms Operation `users.findOne()` buffering timed out after 10000ms","stack":"MongooseError: Operation `users.findOne()` buffering timed out after 10000ms\n    at Timeout.<anonymous> (/home/mohammad/projects/dorreh/market/back/node_modules/mongoose/lib/drivers/node-mongodb-native/collection.js:185:20)\n    at listOnTimeout (internal/timers.js:554:17)\n    at processTimers (internal/timers.js:497:7)"}
{"level":"error","message":"Operation `users.findOne()` buffering timed out after 10000ms Operation `users.findOne()` buffering timed out after 10000ms","stack":"MongooseError: Operation `users.findOne()` buffering timed out after 10000ms\n    at Timeout.<anonymous> (/home/mohammad/projects/dorreh/market/back/node_modules/mongoose/lib/drivers/node-mongodb-native/collection.js:185:20)\n    at listOnTimeout (internal/timers.js:554:17)\n    at processTimers (internal/timers.js:497:7)"}
{"level":"error","message":"Operation `users.findOne()` buffering timed out after 10000ms Operation `users.findOne()` buffering timed out after 10000ms","stack":"MongooseError: Operation `users.findOne()` buffering timed out after 10000ms\n    at Timeout.<anonymous> (/home/mohammad/projects/dorreh/market/back/node_modules/mongoose/lib/drivers/node-mongodb-native/collection.js:185:20)\n    at listOnTimeout (internal/timers.js:554:17)\n    at processTimers (internal/timers.js:497:7)"}
{"level":"error","message":"Operation `users.findOne()` buffering timed out after 10000ms Operation `users.findOne()` buffering timed out after 10000ms","stack":"MongooseError: Operation `users.findOne()` buffering timed out after 10000ms\n    at Timeout.<anonymous> (/home/mohammad/projects/dorreh/market/back/node_modules/mongoose/lib/drivers/node-mongodb-native/collection.js:185:20)\n    at listOnTimeout (internal/timers.js:554:17)\n    at processTimers (internal/timers.js:497:7)"}
{"level":"error","message":"Operation `users.findOne()` buffering timed out after 10000ms Operation `users.findOne()` buffering timed out after 10000ms","stack":"MongooseError: Operation `users.findOne()` buffering timed out after 10000ms\n    at Timeout.<anonymous> (/home/mohammad/projects/dorreh/market/back/node_modules/mongoose/lib/drivers/node-mongodb-native/collection.js:185:20)\n    at listOnTimeout (internal/timers.js:554:17)\n    at processTimers (internal/timers.js:497:7)"}
{"level":"error","message":"Operation `users.findOne()` buffering timed out after 10000ms Operation `users.findOne()` buffering timed out after 10000ms","stack":"MongooseError: Operation `users.findOne()` buffering timed out after 10000ms\n    at Timeout.<anonymous> (/home/mohammad/projects/dorreh/market/back/node_modules/mongoose/lib/drivers/node-mongodb-native/collection.js:185:20)\n    at listOnTimeout (internal/timers.js:554:17)\n    at processTimers (internal/timers.js:497:7)"}
{"level":"error","message":"Operation `users.findOne()` buffering timed out after 10000ms Operation `users.findOne()` buffering timed out after 10000ms","stack":"MongooseError: Operation `users.findOne()` buffering timed out after 10000ms\n    at Timeout.<anonymous> (/home/mohammad/projects/dorreh/market/back/node_modules/mongoose/lib/drivers/node-mongodb-native/collection.js:185:20)\n    at listOnTimeout (internal/timers.js:554:17)\n    at processTimers (internal/timers.js:497:7)"}
{"message":"ENOENT: no such file or directory, mkdir 'public/uploads/admin/category'","level":"error"}
{"message":"The \"path\" argument must be of type string or an instance of Buffer or URL. Received undefined","level":"error"}
{"message":"ENOENT: no such file or directory, mkdir 'public/uploads/admin/category'","level":"error"}
{"message":"The \"path\" argument must be of type string or an instance of Buffer or URL. Received undefined","level":"error"}
{"message":"dir is not defined","level":"error"}
{"message":"dir is not defined","level":"error"}
{"message":"ENOENT: no such file or directory, mkdir 'public/uploads/admin/category'","level":"error"}
{"message":"ENOENT: no such file or directory, mkdir 'public/uploads/admin/category'","level":"error"}
{"level":"error","message":"fs is not defined fs is not defined","stack":"ReferenceError: fs is not defined\n    at uploadImage (/home/mohammad/projects/dorreh/market/back/controllers/product.js:255:5)\n    at newFn (/home/mohammad/projects/dorreh/market/back/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/route.js:137:13)\n    at module.exports (/home/mohammad/projects/dorreh/market/back/middlwares/auth.js:11:5)\n    at newFn (/home/mohammad/projects/dorreh/market/back/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/route.js:137:13)\n    at Route.dispatch (/home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/route.js:112:3)\n    at newFn (/home/mohammad/projects/dorreh/market/back/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/layer.js:95:5)\n    at /home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/index.js:281:22\n    at param (/home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/index.js:354:14)\n    at param (/home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/index.js:365:14)\n    at Function.process_params (/home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/index.js:410:3)\n    at next (/home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/index.js:275:10)"}
{"message":"multer is not defined","level":"error"}
{"message":"multer is not defined","level":"error"}
{"message":"multer is not defined","level":"error"}
{"message":"multer is not defined","level":"error"}
{"message":"multer is not defined","level":"error"}
{"message":"multer is not defined","level":"error"}
{"errno":-17,"syscall":"mkdir","code":"EEXIST","path":"/home/mohammad/projects/dorreh/market/back/public/uploads/admin/product/60912c88f1964b24e2696ec6","level":"error","message":"EEXIST: file already exists, mkdir '/home/mohammad/projects/dorreh/market/back/public/uploads/admin/product/60912c88f1964b24e2696ec6' EEXIST: file already exists, mkdir '/home/mohammad/projects/dorreh/market/back/public/uploads/admin/product/60912c88f1964b24e2696ec6'","stack":"Error: EEXIST: file already exists, mkdir '/home/mohammad/projects/dorreh/market/back/public/uploads/admin/product/60912c88f1964b24e2696ec6'\n    at Object.mkdirSync (fs.js:987:3)\n    at uploadImage (/home/mohammad/projects/dorreh/market/back/controllers/product.js:259:8)\n    at newFn (/home/mohammad/projects/dorreh/market/back/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/route.js:137:13)\n    at module.exports (/home/mohammad/projects/dorreh/market/back/middlwares/auth.js:11:5)\n    at newFn (/home/mohammad/projects/dorreh/market/back/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/route.js:137:13)\n    at Route.dispatch (/home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/route.js:112:3)\n    at newFn (/home/mohammad/projects/dorreh/market/back/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/layer.js:95:5)\n    at /home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/index.js:281:22\n    at param (/home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/index.js:354:14)\n    at param (/home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/index.js:365:14)\n    at Function.process_params (/home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/index.js:410:3)"}
{"errno":-17,"syscall":"mkdir","code":"EEXIST","path":"/home/mohammad/projects/dorreh/market/back/public/uploads/admin/product/60912c88f1964b24e2696ec6","level":"error","message":"EEXIST: file already exists, mkdir '/home/mohammad/projects/dorreh/market/back/public/uploads/admin/product/60912c88f1964b24e2696ec6' EEXIST: file already exists, mkdir '/home/mohammad/projects/dorreh/market/back/public/uploads/admin/product/60912c88f1964b24e2696ec6'","stack":"Error: EEXIST: file already exists, mkdir '/home/mohammad/projects/dorreh/market/back/public/uploads/admin/product/60912c88f1964b24e2696ec6'\n    at Object.mkdirSync (fs.js:987:3)\n    at uploadImage (/home/mohammad/projects/dorreh/market/back/controllers/product.js:288:8)\n    at newFn (/home/mohammad/projects/dorreh/market/back/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/route.js:137:13)\n    at module.exports (/home/mohammad/projects/dorreh/market/back/middlwares/auth.js:11:5)\n    at newFn (/home/mohammad/projects/dorreh/market/back/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/route.js:137:13)\n    at Route.dispatch (/home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/route.js:112:3)\n    at newFn (/home/mohammad/projects/dorreh/market/back/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/layer.js:95:5)\n    at /home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/index.js:281:22\n    at param (/home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/index.js:354:14)\n    at param (/home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/index.js:365:14)\n    at Function.process_params (/home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/index.js:410:3)"}
{"message":"cl is not defined","level":"error"}
{"message":"cl is not defined","level":"error"}
{"level":"error","message":"Operation `products.find()` buffering timed out after 10000ms Operation `products.find()` buffering timed out after 10000ms","stack":"MongooseError: Operation `products.find()` buffering timed out after 10000ms\n    at Timeout.<anonymous> (/home/mohammad/projects/dorreh/market/back/node_modules/mongoose/lib/drivers/node-mongodb-native/collection.js:185:20)\n    at listOnTimeout (internal/timers.js:554:17)\n    at processTimers (internal/timers.js:497:7)"}
{"level":"error","message":"Operation `categories.find()` buffering timed out after 10000ms Operation `categories.find()` buffering timed out after 10000ms","stack":"MongooseError: Operation `categories.find()` buffering timed out after 10000ms\n    at Timeout.<anonymous> (/home/mohammad/projects/dorreh/market/back/node_modules/mongoose/lib/drivers/node-mongodb-native/collection.js:185:20)\n    at listOnTimeout (internal/timers.js:554:17)\n    at processTimers (internal/timers.js:497:7)"}
{"level":"error","message":"Operation `products.find()` buffering timed out after 10000ms Operation `products.find()` buffering timed out after 10000ms","stack":"MongooseError: Operation `products.find()` buffering timed out after 10000ms\n    at Timeout.<anonymous> (/home/mohammad/projects/dorreh/market/back/node_modules/mongoose/lib/drivers/node-mongodb-native/collection.js:185:20)\n    at listOnTimeout (internal/timers.js:554:17)\n    at processTimers (internal/timers.js:497:7)"}
{"level":"error","message":"Operation `categories.find()` buffering timed out after 10000ms Operation `categories.find()` buffering timed out after 10000ms","stack":"MongooseError: Operation `categories.find()` buffering timed out after 10000ms\n    at Timeout.<anonymous> (/home/mohammad/projects/dorreh/market/back/node_modules/mongoose/lib/drivers/node-mongodb-native/collection.js:185:20)\n    at listOnTimeout (internal/timers.js:554:17)\n    at processTimers (internal/timers.js:497:7)"}
{"level":"error","message":"Operation `categories.find()` buffering timed out after 10000ms Operation `categories.find()` buffering timed out after 10000ms","stack":"MongooseError: Operation `categories.find()` buffering timed out after 10000ms\n    at Timeout.<anonymous> (/home/mohammad/projects/dorreh/market/back/node_modules/mongoose/lib/drivers/node-mongodb-native/collection.js:185:20)\n    at listOnTimeout (internal/timers.js:554:17)\n    at processTimers (internal/timers.js:497:7)"}
{"level":"error","message":"Operation `categories.find()` buffering timed out after 10000ms Operation `categories.find()` buffering timed out after 10000ms","stack":"MongooseError: Operation `categories.find()` buffering timed out after 10000ms\n    at Timeout.<anonymous> (/home/mohammad/projects/dorreh/market/back/node_modules/mongoose/lib/drivers/node-mongodb-native/collection.js:185:20)\n    at listOnTimeout (internal/timers.js:554:17)\n    at processTimers (internal/timers.js:497:7)"}
{"level":"error","message":"Operation `categories.find()` buffering timed out after 10000ms Operation `categories.find()` buffering timed out after 10000ms","stack":"MongooseError: Operation `categories.find()` buffering timed out after 10000ms\n    at Timeout.<anonymous> (/home/mohammad/projects/dorreh/market/back/node_modules/mongoose/lib/drivers/node-mongodb-native/collection.js:185:20)\n    at listOnTimeout (internal/timers.js:554:17)\n    at processTimers (internal/timers.js:497:7)"}
{"level":"error","message":"Operation `categories.find()` buffering timed out after 10000ms Operation `categories.find()` buffering timed out after 10000ms","stack":"MongooseError: Operation `categories.find()` buffering timed out after 10000ms\n    at Timeout.<anonymous> (/home/mohammad/projects/dorreh/market/back/node_modules/mongoose/lib/drivers/node-mongodb-native/collection.js:185:20)\n    at listOnTimeout (internal/timers.js:554:17)\n    at processTimers (internal/timers.js:497:7)"}
{"level":"error","message":"Operation `categories.find()` buffering timed out after 10000ms Operation `categories.find()` buffering timed out after 10000ms","stack":"MongooseError: Operation `categories.find()` buffering timed out after 10000ms\n    at Timeout.<anonymous> (/home/mohammad/projects/dorreh/market/back/node_modules/mongoose/lib/drivers/node-mongodb-native/collection.js:185:20)\n    at listOnTimeout (internal/timers.js:554:17)\n    at processTimers (internal/timers.js:497:7)"}
{"level":"error","message":"Operation `categories.find()` buffering timed out after 10000ms Operation `categories.find()` buffering timed out after 10000ms","stack":"MongooseError: Operation `categories.find()` buffering timed out after 10000ms\n    at Timeout.<anonymous> (/home/mohammad/projects/dorreh/market/back/node_modules/mongoose/lib/drivers/node-mongodb-native/collection.js:185:20)\n    at listOnTimeout (internal/timers.js:554:17)\n    at processTimers (internal/timers.js:497:7)"}
{"level":"error","message":"Operation `categories.find()` buffering timed out after 10000ms Operation `categories.find()` buffering timed out after 10000ms","stack":"MongooseError: Operation `categories.find()` buffering timed out after 10000ms\n    at Timeout.<anonymous> (/home/mohammad/projects/dorreh/market/back/node_modules/mongoose/lib/drivers/node-mongodb-native/collection.js:185:20)\n    at listOnTimeout (internal/timers.js:554:17)\n    at processTimers (internal/timers.js:497:7)"}
{"level":"error","message":"Operation `categories.find()` buffering timed out after 10000ms Operation `categories.find()` buffering timed out after 10000ms","stack":"MongooseError: Operation `categories.find()` buffering timed out after 10000ms\n    at Timeout.<anonymous> (/home/mohammad/projects/dorreh/market/back/node_modules/mongoose/lib/drivers/node-mongodb-native/collection.js:185:20)\n    at listOnTimeout (internal/timers.js:554:17)\n    at processTimers (internal/timers.js:497:7)"}
{"level":"error","message":"Operation `categories.find()` buffering timed out after 10000ms Operation `categories.find()` buffering timed out after 10000ms","stack":"MongooseError: Operation `categories.find()` buffering timed out after 10000ms\n    at Timeout.<anonymous> (/home/mohammad/projects/dorreh/market/back/node_modules/mongoose/lib/drivers/node-mongodb-native/collection.js:185:20)\n    at listOnTimeout (internal/timers.js:554:17)\n    at processTimers (internal/timers.js:497:7)"}
{"level":"error","message":"Operation `categories.find()` buffering timed out after 10000ms Operation `categories.find()` buffering timed out after 10000ms","stack":"MongooseError: Operation `categories.find()` buffering timed out after 10000ms\n    at Timeout.<anonymous> (/home/mohammad/projects/dorreh/market/back/node_modules/mongoose/lib/drivers/node-mongodb-native/collection.js:185:20)\n    at listOnTimeout (internal/timers.js:554:17)\n    at processTimers (internal/timers.js:497:7)"}
{"level":"error","message":"Operation `products.insertOne()` buffering timed out after 10000ms Operation `products.insertOne()` buffering timed out after 10000ms","stack":"MongooseError: Operation `products.insertOne()` buffering timed out after 10000ms\n    at Timeout.<anonymous> (/home/mohammad/projects/dorreh/market/back/node_modules/mongoose/lib/drivers/node-mongodb-native/collection.js:185:20)\n    at listOnTimeout (internal/timers.js:554:17)\n    at processTimers (internal/timers.js:497:7)"}
{"level":"error","message":"Operation `products.insertOne()` buffering timed out after 10000ms Operation `products.insertOne()` buffering timed out after 10000ms","stack":"MongooseError: Operation `products.insertOne()` buffering timed out after 10000ms\n    at Timeout.<anonymous> (/home/mohammad/projects/dorreh/market/back/node_modules/mongoose/lib/drivers/node-mongodb-native/collection.js:185:20)\n    at listOnTimeout (internal/timers.js:554:17)\n    at processTimers (internal/timers.js:497:7)"}
{"message":"Cannot read property 'images' of undefined","level":"error"}
{"message":"Cannot read property 'images' of undefined","level":"error"}
{"message":"Cannot read property 'images' of undefined","level":"error"}
{"message":"Cannot read property 'images' of undefined","level":"error"}
{"message":"Cannot read property 'images' of undefined","level":"error"}
{"message":"Cannot read property 'images' of undefined","level":"error"}
{"message":"Cannot read property 'images' of undefined","level":"error"}
{"message":"Cannot read property 'images' of undefined","level":"error"}
{"message":"Cannot read property 'images' of undefined","level":"error"}
{"message":"Cannot read property 'filename' of undefined","level":"error"}
{"message":"Cannot read property 'filename' of undefined","level":"error"}
{"message":"Cannot read property 'filename' of undefined","level":"error"}
{"message":"Cannot read property 'filename' of undefined","level":"error"}
{"message":"Cannot read property 'filename' of undefined","level":"error"}
{"level":"error","message":"Cannot destructure property '_id' of 'req.user' as it is undefined. Cannot destructure property '_id' of 'req.user' as it is undefined.","stack":"TypeError: Cannot destructure property '_id' of 'req.user' as it is undefined.\n    at create (/home/mohammad/projects/dorreh/market/back/controllers/order.js:30:11)\n    at newFn (/home/mohammad/projects/dorreh/market/back/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/route.js:137:13)\n    at Route.dispatch (/home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/route.js:112:3)\n    at newFn (/home/mohammad/projects/dorreh/market/back/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/layer.js:95:5)\n    at /home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/index.js:281:22\n    at Function.process_params (/home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/index.js:335:12)\n    at next (/home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/index.js:275:10)\n    at Function.handle (/home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/index.js:174:3)\n    at router (/home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/index.js:47:12)\n    at newFn (/home/mohammad/projects/dorreh/market/back/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/index.js:317:13)\n    at /home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/index.js:284:7"}
{"level":"error","message":"Cannot destructure property '_id' of 'req.user' as it is undefined. Cannot destructure property '_id' of 'req.user' as it is undefined.","stack":"TypeError: Cannot destructure property '_id' of 'req.user' as it is undefined.\n    at create (/home/mohammad/projects/dorreh/market/back/controllers/order.js:30:11)\n    at newFn (/home/mohammad/projects/dorreh/market/back/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/route.js:137:13)\n    at Route.dispatch (/home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/route.js:112:3)\n    at newFn (/home/mohammad/projects/dorreh/market/back/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/layer.js:95:5)\n    at /home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/index.js:281:22\n    at Function.process_params (/home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/index.js:335:12)\n    at next (/home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/index.js:275:10)\n    at Function.handle (/home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/index.js:174:3)\n    at router (/home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/index.js:47:12)\n    at newFn (/home/mohammad/projects/dorreh/market/back/node_modules/express-async-errors/index.js:16:20)\n    at Layer.handle [as handle_request] (/home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/index.js:317:13)\n    at /home/mohammad/projects/dorreh/market/back/node_modules/express/lib/router/index.js:284:7"}
{"message":"You are trying to attach socket.io to an express request handler function. Please pass a http.Server instance.","level":"error"}
{"message":"You are trying to attach socket.io to an express request handler function. Please pass a http.Server instance.","level":"error"}
{"message":"You are trying to attach socket.io to an express request handler function. Please pass a http.Server instance.","level":"error"}
{"message":"You are trying to attach socket.io to an express request handler function. Please pass a http.Server instance.","level":"error"}
{"message":"this.connectToSocket is not a function","level":"error"}
{"message":"this.connectToSocket is not a function","level":"error"}
{"message":"this.connectToSocket is not a function","level":"error"}
{"message":"require(...).listen is not a function","level":"error"}
{"message":"listen EADDRINUSE: address already in use :::8989","level":"error"}
{"message":"listen EADDRINUSE: address already in use :::8989","level":"error"}
{"message":"listen EADDRINUSE: address already in use :::8989","level":"error"}
{"message":"listen EADDRINUSE: address already in use :::8989","level":"error"}
{"message":"listen EADDRINUSE: address already in use :::8989","level":"error"}
{"message":"listen EADDRINUSE: address already in use :::8989","level":"error"}
{"message":"listen EADDRINUSE: address already in use :::8989","level":"error"}
{"message":"listen EADDRINUSE: address already in use :::8989","level":"error"}
{"message":"listen EADDRINUSE: address already in use :::8989","level":"error"}
{"message":"listen EADDRINUSE: address already in use :::8989","level":"error"}
{"message":"listen EADDRINUSE: address already in use :::8989","level":"error"}
{"driver":true,"name":"MongoError","index":0,"code":11000,"keyPattern":{"phoneNumber":1},"keyValue":{"phoneNumber":9352525697},"level":"error","message":"E11000 duplicate key error collection: multivendor.users index: phoneNumber_1 dup key: { phoneNumber: 9352525697.0 } E11000 duplicate key error collection: multivendor.users index: phoneNumber_1 dup key: { phoneNumber: 9352525697.0 }","stack":"MongoError: E11000 duplicate key error collection: multivendor.users index: phoneNumber_1 dup key: { phoneNumber: 9352525697.0 }\n    at Function.create (/home/mohammad/projects/dorreh/market multi/node_modules/mongodb/lib/core/error.js:57:12)\n    at toError (/home/mohammad/projects/dorreh/market multi/node_modules/mongodb/lib/utils.js:123:22)\n    at /home/mohammad/projects/dorreh/market multi/node_modules/mongodb/lib/operations/common_functions.js:265:39\n    at handler (/home/mohammad/projects/dorreh/market multi/node_modules/mongodb/lib/core/sdam/topology.js:942:24)\n    at /home/mohammad/projects/dorreh/market multi/node_modules/mongodb/lib/cmap/connection_pool.js:350:13\n    at handleOperationResult (/home/mohammad/projects/dorreh/market multi/node_modules/mongodb/lib/core/sdam/server.js:558:5)\n    at MessageStream.messageHandler (/home/mohammad/projects/dorreh/market multi/node_modules/mongodb/lib/cmap/connection.js:277:5)\n    at MessageStream.emit (events.js:315:20)\n    at processIncomingData (/home/mohammad/projects/dorreh/market multi/node_modules/mongodb/lib/cmap/message_stream.js:144:12)\n    at MessageStream._write (/home/mohammad/projects/dorreh/market multi/node_modules/mongodb/lib/cmap/message_stream.js:42:5)\n    at writeOrBuffer (internal/streams/writable.js:358:12)\n    at MessageStream.Writable.write (internal/streams/writable.js:303:10)\n    at Socket.ondata (internal/streams/readable.js:719:22)\n    at Socket.emit (events.js:315:20)\n    at addChunk (internal/streams/readable.js:309:12)\n    at readableAddChunk (internal/streams/readable.js:284:9)"}
{"message":"listen EADDRINUSE: address already in use :::8989","level":"error"}
{"message":"listen EADDRINUSE: address already in use :::8989","level":"error"}
{"message":"listen EADDRINUSE: address already in use :::8989","level":"error"}
{"message":"listen EADDRINUSE: address already in use :::8989","level":"error"}
{"message":"listen EADDRINUSE: address already in use :::8989","level":"error"}
{"message":"listen EADDRINUSE: address already in use :::8989","level":"error"}
{"message":"listen EADDRINUSE: address already in use :::8989","level":"error"}
{"message":"listen EADDRINUSE: address already in use :::8989","level":"error"}
{"message":"listen EADDRINUSE: address already in use :::8989","level":"error"}
{"message":"listen EADDRINUSE: address already in use :::8989","level":"error"}
{"message":"listen EADDRINUSE: address already in use :::8989","level":"error"}
{"message":"listen EADDRINUSE: address already in use :::8989","level":"error"}
{"message":"listen EADDRINUSE: address already in use :::8989","level":"error"}
{"message":"listen EADDRINUSE: address already in use :::8989","level":"error"}
{"message":"listen EADDRINUSE: address already in use :::8989","level":"error"}
{"message":"listen EADDRINUSE: address already in use :::8989","level":"error"}
{"message":"listen EADDRINUSE: address already in use :::8989","level":"error"}
{"message":"listen EADDRINUSE: address already in use :::8989","level":"error"}
{"message":"listen EADDRINUSE: address already in use :::8989","level":"error"}
{"message":"listen EADDRINUSE: address already in use :::8989","level":"error"}
{"message":"listen EADDRINUSE: address already in use :::8989","level":"error"}
{"message":"listen EADDRINUSE: address already in use :::8989","level":"error"}
{"message":"listen EADDRINUSE: address already in use :::8989","level":"error"}
{"message":"listen EADDRINUSE: address already in use :::8989","level":"error"}
